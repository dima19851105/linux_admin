# Домашнее задание №17

Настроить политику бекапа директории /etc с клиента (server) на бекап сервер (backup):  
1) Бекап делаем раз в час  
2) Политика хранения бекапов: храним все за последние 30 дней, и по одному за предыдущие два месяца.  
3) Настроить логирование процесса бекапа в /var/log/ - название файла на ваше усмотрение  
4) Восстановить из бекапа директорию /etc с помощью опции Borg mount  

Для проверки необходимо скачать из данного репозитория GitHub каталог Lesson_17 и перейти в него.  
Далее необходимо выполнить в терминале  

	vagrant up
	vagrant ssh server

Инициализацию репозитория для хранения бэкапов запустим из-под пользователя borg

	sudo su - borg
	borg init -e none borg@backup:server-etc

Скрипт запуска и хранения резервного копирования размещен в директории */etc/cron.hourly*. В качестве лога используется вывод результатов выполнения скрипта backup-data.sh, размещается в */var/log/borg/backup.log*. Скрипт запускаем из-под root.

	bash /etc/cron.hourly/backup-data-cron.sh
	или
	run-parts /etc/cron.hourly

Одной из возможностей borg является монтирование бекапа. Команды необходимо выполнять из-под пользователя borg

	sudo su - borg
	borg list backup:server-etc
	mkdir /tmp/backup
	borg mount backup:server-etc::<имя файла бекапа> /tmp/backup/
	cat /tmp/backup/etc/hosts

Вывод работы команд сохранен с помощью утилиты script в файле **borg-backup**



